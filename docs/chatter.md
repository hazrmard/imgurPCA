# imgurpca.macros.Chatter  
`Chatter` provides an interface to generate random comments based on the
comments contained in the `Parser`, `Post`, or `User` provided to an
instance. `Chatter` is subclassed from `base.Markov`. `Chatter` may be
extended to generate random titles, descriptions etc. by overriding the
`plaintext` property attribute.  

### Attributes  
```
- order (int):
    The order of the Markov chain to generate. Default=2.

- source (Parser/Post/User):
    An instance of a Parser, Post, or User which has the comments available.

- plaintext (str):
    Returns the comments of the source in a plain string separated by newline.
    This is a `@property` attribute so can be overwritten.

- regex_delimiters (list):
    A list of delimiters that are special characters in the 're' module in
    Python (like \s). Default=['\s'] for all whitespace. 'plaintext' will be
    split into words based on characters here and in 'delimiters'.

- delimiters (list):
    A list of characters to split plaintext on. Combined with regex_delimiters.
    Default=['.', ',', ';', '-', ':', '?','!']

- regex_stopchars (list):
    A list of special 're' module charaacters that indicate the end of a
    comment/sentence. Default=['\n'] since all comments are newline separated.
    Should be a subset of regex_delimiters.

- stopchars (list):
    A list of characters indicating, with regex_stopchars, the end of a
    comment. Default=['.', '!', '?']. Should be a subset of delimiters.

- spacechar (str):
    A character representing space. Default=' '.

- chain (dict):
    A dictionary representing the Markov chain of source comments. Populated
    by generate_chain().

Any keyword arguments provided at instantiation are set as attributes.
```

### Instantiation
```python
def __init__(self, source, order=2, *args, **kwargs):
# Example
from imgurpca.macros import Chatter
from imgurpca import Post
p = Post(id='some id', cs='client_secret', cid='client_id')
p.download()
c = Chatter(source=c, order=3)
```
```
Parameters:
- source (Parser/Post/Instance):
    And subclass of base.Atomic or base.Molecular (e.g. Parser, Post, or
    User)

- order (int):
    The order of the Markov chain to generate. Corresponds to the number of
    words in the prefix in the chain. Default=2.

Any keyword arguments provided at instantiation are set as attributes.
```

### generate_chain
Using the string obtained from `Chatter.plaintext`, generates a dictionary of
prefixes, each of size `Chatter.order`,  and suffixes in `Parser.chain`.
Required to generate any random text.
```python
def generate_chain(self):
# Example
c.generate_chain()
```

### random_walk
Using the chain in `Chatter.chain`, and a starting string,  generates some number of sentences, each ending in any of `Chatter.stopchars` or
`Chatter.regex_stopchars`. Normally, this function is not to be used in
favour of `random_comment()` and `random_reply()`.  
```python
def random_walk(self, begin=None, times=1):
# Example
result = c.random_walk(times=10)        # 10 sentences
result = c.random_walk(begin='Hello')   # If possible, start with 'Hello'
```
```
Parameters:
- begin (str/tuple):
    OPTIONAL. A string or tuple of words that either begin the response, or
    are present close to the beginning. If no match is found, response is
    random (default).

- times (int):
    Number of sentences to generate Default=1.

Returns a string of separated by self.spacechar generated by a random walk
over the Markov chain.
```

### sanitize
Using the output of `random_walk()`, clean it by removing any artefacts from
the chain. For example, by default, spaces are included in delimiters and
are captured as 'words' in the markov chain. They are also used to combine
words in `random_walk()`. Therefore repeated spaces, or spaces before
periods are possible. `sanitize()` removes them along with other artefacts.  
```python
def sanitize(self, text):
# Example
result = c.sanitize(c.random_walk())
```
```
Parameters:
- text (str):
    A string to clean up. Normally the output of random_walk().

Returns the cleaned up string.
```

### random_comment
Generates a single sanitized sentence using `random_walk()`.
```python
def random_comment(self):
# Example
print(c.random_comment())
# Equivalent to:
# print(c.sanitize(c.random_walk(times=1)))
```

### random_reply
Given a stimulus, generate a random sentence using `random_walk()`. If
stimulus is not found in the chain, generates a random sentence.  
```python
def random_reply(self):
# Example
print(c.random_reply(to="What's up?"))
# Equivalent to:
# print(c.sanitize(c.random_walk(begin="What's up?", times=1)))
```
